<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Diagnóstico Estratégico Valente</title>
    <!-- Inclui o Tailwind CSS para estilização -->
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f3f4f6; /* Cor de fundo suave */
        }
        /* Estilos adicionais para focar no conteúdo principal */
        .form-container {
            max-width: 960px; /* Largura máxima para o formulário em telas maiores */
        }
        .section-title {
            border-bottom: 2px solid #e5e7eb; /* Linha sutil para separar seções */
            padding-bottom: 0.5rem;
            margin-bottom: 1.5rem;
            /* Usando a cor teal do site para o border-bottom */
            border-color: #2EAFB2;
        }
    </style>
</head>
<body class="flex flex-col items-center justify-center min-h-screen p-4 sm:p-6 lg:p-8">
    <div class="form-container bg-white shadow-xl rounded-2xl p-6 sm:p-8 md:p-10 lg:p-12 w-full">
        <header class="text-center mb-8">
            <!-- Título com a cor principal do site Valente -->
            <h1 class="text-3xl sm:text-4xl font-bold text-[#3C366B] mb-2">Diagnóstico Estratégico Valente</h1>
            <p class="text-base sm:text-lg text-gray-600">
                Compreenda profundamente os desafios e objetivos da sua organização.
            </p>
        </header>

        <!--
            O formulário agora utiliza JavaScript para enviar os dados via API para o Resend.com.
            O atributo 'target' foi removido, pois a submissão não é mais feita para um iframe.
            O evento 'onsubmit' chama a função 'sendFormData'.
        -->
        <form
            action="" /* A action é vazia pois o JS cuidará do envio */
            method="POST"
            class="space-y-8"
            onsubmit="sendFormData(event);" /* Chama a função JavaScript para enviar os dados */
        >
            <!-- Campos do Formulário -->
            <section>
                <h2 class="text-xl sm:text-2xl font-semibold text-[#3C366B] mb-4 section-title">I. Informações Gerais da Empresa</h2>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                    <div>
                        <label for="nomeEmpresa" class="block text-sm font-medium text-gray-700 mb-1">Nome da Empresa</label>
                        <input type="text" id="nomeEmpresa" name="entry.68067341" class="mt-1 block w-full px-4 py-2 border border-gray-300 rounded-lg shadow-sm focus:ring-[#2EAFB2] focus:border-[#2EAFB2] sm:text-sm" placeholder="Nome completo da empresa" required>
                    </div>
                    <div>
                        <label for="setorAtuacao" class="block text-sm font-medium text-gray-700 mb-1">Setor de Atuação</label>
                        <input type="text" id="setorAtuacao" name="entry.1691243760" class="mt-1 block w-full px-4 py-2 border border-gray-300 rounded-lg shadow-sm focus:ring-[#2EAFB2] focus:border-[#2EAFB2] sm:text-sm" placeholder="Ex: Tecnologia, Saúde, Educação" required>
                    </div>
                    <div class="col-span-1 md:col-span-2">
                        <label class="block text-sm font-medium text-gray-700 mb-2">Porte da Empresa (Nº de Funcionários)</label>
                        <div class="mt-1 grid grid-cols-1 sm:grid-cols-3 gap-4">
                            <label class="inline-flex items-center">
                                <input type="radio" class="form-radio h-4 w-4 text-[#2EAFB2]" name="entry.1226065487" value="Pequena (até 50)" required>
                                <span class="ml-2 text-gray-700">Pequena (até 50)</span>
                            </label>
                            <label class="inline-flex items-center">
                                <input type="radio" class="form-radio h-4 w-4 text-[#2EAFB2]" name="entry.1226065487" value="Média (51 a 250)">
                                <span class="ml-2 text-gray-700">Média (51 a 250)</span>
                            </label>
                            <label class="inline-flex items-center">
                                <input type="radio" class="form-radio h-4 w-4 text-[#2EAFB2]" name="entry.1226065487" value="Grande (acima de 250)">
                                <span class="ml-2 text-gray-700">Grande (acima de 250)</span>
                            </label>
                        </div>
                    </div>
                    <div>
                        <label for="pessoaContato" class="block text-sm font-medium text-gray-700 mb-1">Pessoa de Contato</label>
                        <input type="text" id="pessoaContato" name="entry.101783060" class="mt-1 block w-full px-4 py-2 border border-gray-300 rounded-lg shadow-sm focus:ring-[#2EAFB2] focus:border-[#2EAFB2] sm:text-sm" placeholder="Nome completo" required>
                    </div>
                    <div>
                        <label for="cargoContato" class="block text-sm font-medium text-gray-700 mb-1">Cargo</label>
                        <input type="text" id="cargoContato" name="entry.69974868" class="mt-1 block w-full px-4 py-2 border border-gray-300 rounded-lg shadow-sm focus:ring-[#2EAFB2] focus:border-[#2EAFB2] sm:text-sm" placeholder="Ex: Gerente de RH" required>
                    </div>
                    <div>
                        <label for="emailContato" class="block text-sm font-medium text-gray-700 mb-1">E-mail</label>
                        <input type="email" id="emailContato" name="entry.880479708" class="mt-1 block w-full px-4 py-2 border border-gray-300 rounded-lg shadow-sm focus:ring-[#2EAFB2] focus:border-[#2EAFB2] sm:text-sm" placeholder="seu.email@exemplo.com" required>
                    </div>
                    <div>
                        <label for="telefoneContato" class="block text-sm font-medium text-gray-700 mb-1">Telefone</label>
                        <input type="tel" id="telefoneContato" name="entry.1165439402" class="mt-1 block w-full px-4 py-2 border border-gray-300 rounded-lg shadow-sm focus:ring-[#2EAFB2] focus:border-[#2EAFB2] sm:text-sm" placeholder="(XX) XXXX-XXXX" required>
                    </div>
                </div>
            </section>

            <section>
                <h2 class="text-xl sm:text-2xl font-semibold text-[#3C366B] mb-4 section-title">II. Contexto Atual e Desafios</h2>
                <div class="space-y-6">
                    <div>
                        <label for="principaisDesafios" class="block text-sm font-medium text-gray-700 mb-1">Quais são os principais desafios ou "dores" que sua organização enfrenta atualmente e que você acredita que o desenvolvimento de pessoas poderia ajudar a resolver?</label>
                        <textarea id="principaisDesafios" name="entry.277874400" rows="4" class="mt-1 block w-full px-4 py-2 border border-gray-300 rounded-lg shadow-sm focus:ring-[#2EAFB2] focus:border-[#2EAFB2] sm:text-sm" placeholder="Ex: baixa produtividade, alta rotatividade, problemas de comunicação, falta de liderança, etc." required></textarea>
                    </div>
                    <div>
                        <label for="impactoDesafios" class="block text-sm font-medium text-gray-700 mb-1">Qual impacto esses desafios estão gerando no negócio (financeiro, operacional, cultural)?</label>
                        <textarea id="impactoDesafios" name="entry.1219662369" rows="3" class="mt-1 block w-full px-4 py-2 border border-gray-300 rounded-lg shadow-sm focus:ring-[#2EAFB2] focus:border-[#2EAFB2] sm:text-sm" required></textarea>
                    </div>
                    <div>
                        <label for="objetivoEstrategico" class="block text-sm font-medium text-gray-700 mb-1">Existe algum objetivo estratégico da empresa que o desenvolvimento de pessoas pode acelerar ou apoiar diretamente?</label>
                        <textarea id="objetivoEstrategico" name="entry.2120014022" rows="3" class="mt-1 block w-full px-4 py-2 border border-gray-300 rounded-lg shadow-sm focus:ring-[#2EAFB2] focus:border-[#2EAFB2] sm:text-sm" placeholder="Ex: expansão para novos mercados, lançamento de um novo produto/serviço, melhoria da experiência do cliente, etc."></textarea>
                    </div>
                    <div>
                        <label for="urgenciaDesafios" class="block text-sm font-medium text-gray-700 mb-1">Em uma escala de 1 a 10, qual a urgência em resolver esses desafios?</label>
                        <input type="range" id="urgenciaDesafios" name="entry.1205318538" min="1" max="10" value="5" class="mt-1 block w-full accent-[#2EAFB2]" oninput="document.getElementById('urgenciaValue').innerText = this.value" required>
                        <span id="urgenciaValue" class="block text-center text-sm text-gray-600 mt-1">5</span>
                    </div>
                </div>
            </section>

            <section>
                <h2 class="text-xl sm:text-2xl font-semibold text-[#3C366B] mb-4 section-title">III. Público-Alvo e Necessidades Específicas</h2>
                <div class="space-y-6">
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">Qual(is) o(s) grupo(s) de colaboradores que se beneficiariam mais diretamente de um treinamento ou mentoria neste momento? (Marque todas as opções que se aplicam)</label>
                        <div class="grid grid-cols-1 sm:grid-cols-2 gap-3">
                            <label class="inline-flex items-center">
                                <input type="checkbox" class="form-checkbox h-4 w-4 text-[#2EAFB2] rounded" name="entry.1505315809" value="Alta Liderança (Diretores, Gerentes Executivos)">
                                <span class="ml-2 text-gray-700">Alta Liderança (Diretores, Gerentes Executivos)</span>
                            </label>
                            <label class="inline-flex items-center">
                                <input type="checkbox" class="form-checkbox h-4 w-4 text-[#2EAFB2] rounded" name="entry.1505315809" value="Lideranças Intermediárias (Coordenadores, Supervisores)">
                                <span class="ml-2 text-gray-700">Lideranças Intermediárias (Coordenadores, Supervisores)</span>
                            </label>
                            <label class="inline-flex items-center">
                                <input type="checkbox" class="form-checkbox h-4 w-4 text-[#2EAFB2] rounded" name="entry.1505315809" value="Equipes Operacionais/Técnicas">
                                <span class="ml-2 text-gray-700">Equipes Operacionais/Técnicas</span>
                            </label>
                            <label class="inline-flex items-center">
                                <input type="checkbox" class="form-checkbox h-4 w-4 text-[#2EAFB2] rounded" name="entry.1505315809" value="Novos Colaboradores (Onboarding)">
                                <span class="ml-2 text-gray-700">Novos Colaboradores (Onboarding)</span>
                            </label>
                            <label class="inline-flex items-center">
                                <input type="checkbox" class="form-checkbox h-4 w-4 text-[#2EAFB2] rounded" name="entry.1505315809" value="Equipes de Vendas">
                                <span class="ml-2 text-gray-700">Equipes de Vendas</span>
                            </label>
                            <label class="inline-flex items-center">
                                <input type="checkbox" class="form-checkbox h-4 w-4 text-[#2EAFB2] rounded" name="entry.1505315809" value="Áreas Específicas (Ex: RH, Marketing, TI, Produção)">
                                <span class="ml-2 text-gray-700">Áreas Específicas (Ex: RH, Marketing, TI, Produção)</span>
                            </label>
                            <label class="inline-flex items-center col-span-1 sm:col-span-2">
                                <input type="checkbox" class="form-checkbox h-4 w-4 text-[#2EAFB2] rounded" name="entry.1505315809" value="Outros">
                                <span class="ml-2 text-gray-700">Outros (Especificar):</span>
                                <input type="text" name="entry.2123512217" class="ml-2 flex-grow px-3 py-1 border border-gray-300 rounded-lg shadow-sm focus:ring-[#2EAFB2] focus:border-[#2EAFB2] text-sm">
                            </label>
                        </div>
                    </div>
                    <div>
                        <label for="competenciasHabilidades" class="block text-sm font-medium text-gray-700 mb-1">Quais competências ou habilidades específicas você busca desenvolver neste(s) grupo(s)?</label>
                        <textarea id="competenciasHabilidades" name="entry.848037466" rows="4" class="mt-1 block w-full px-4 py-2 border border-gray-300 rounded-lg shadow-sm focus:ring-[#2EAFB2] focus:border-[#2EAFB2] sm:text-sm" placeholder="Ex: comunicação assertiva, inteligência emocional, gestão de conflitos, liderança adaptativa, feedback eficaz, resiliência, inovação, etc."></textarea>
                    </div>
                    <div>
                        <label for="comportamentosAprimorados" class="block text-sm font-medium text-gray-700 mb-1">Quais comportamentos você espera ver alterados ou aprimorados após o treinamento/mentoria?</label>
                        <textarea id="comportamentosAprimorados" name="entry.1519782250" rows="3" class="mt-1 block w-full px-4 py-2 border border-gray-300 rounded-lg shadow-sm focus:ring-[#2EAFB2] focus:border-[#2EAFB2] sm:text-sm"></textarea>
                    </div>
                </div>
            </section>

            <section>
                <h2 class="text-xl sm:text-2xl font-semibold text-[#3C366B] mb-4 section-title">IV. Expectativas e Métricas de Sucesso</h2>
                <div class="space-y-6">
                    <div>
                        <label for="medirSucesso" class="block text-sm font-medium text-gray-700 mb-1">Como sua organização medirá o sucesso e o retorno sobre o investimento (ROI) deste treinamento/mentoria? Quais indicadores seriam importantes para você?</label>
                        <textarea id="medirSucesso" name="entry.1235221379" rows="4" class="mt-1 block w-full px-4 py-2 border border-gray-300 rounded-lg shadow-sm focus:ring-[#2EAFB2] focus:border-[#2EAFB2] sm:text-sm" placeholder="Ex: aumento de produtividade, redução de turnover, melhoria do clima organizacional, atingimento de metas, etc."></textarea>
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">Qual o formato de treinamento preferencial para sua equipe? (Marque todas as opções que se aplicam)</label>
                        <div class="grid grid-cols-1 sm:grid-cols-2 gap-3">
                            <label class="inline-flex items-center">
                                <input type="checkbox" class="form-checkbox h-4 w-4 text-[#2EAFB2] rounded" name="entry.1740924976" value="Presencial 'in company'">
                                <span class="ml-2 text-gray-700">Presencial "in company"</span>
                            </label>
                            <label class="inline-flex items-center">
                                <input type="checkbox" class="form-checkbox h-4 w-4 text-[#2EAFB2] rounded" name="entry.1740924976" value="Online ao vivo (webinar/sala virtual)">
                                <span class="ml-2 text-gray-700">Online ao vivo (webinar/sala virtual)</span>
                            </label>
                            <label class="inline-flex items-center">
                                <input type="checkbox" class="form-checkbox h-4 w-4 text-[#2EAFB2] rounded" name="entry.1740924976" value="Online gravado (EAD)">
                                <span class="ml-2 text-gray-700">Online gravado (EAD)</span>
                            </label>
                            <label class="inline-flex items-center">
                                <input type="checkbox" class="form-checkbox h-4 w-4 text-[#2EAFB2] rounded" name="entry.1740924976" value="Mentoria individual ou em grupo">
                                <span class="ml-2 text-gray-700">Mentoria individual ou em grupo</span>
                            </label>
                            <label class="inline-flex items-center">
                                <input type="checkbox" class="form-checkbox h-4 w-4 text-[#2EAFB2] rounded" name="entry.1740924976" value="Workshops práticos">
                                <span class="ml-2 text-gray-700">Workshops práticos</span>
                            </label>
                            <label class="inline-flex items-center col-span-1 sm:col-span-2">
                                <input type="checkbox" class="form-checkbox h-4 w-4 text-[#2EAFB2] rounded" name="entry.1740924976" value="Outro">
                                <span class="ml-2 text-gray-700">Outro (Especificar):</span>
                                <input type="text" name="entry.1764669818" class="ml-2 flex-grow px-3 py-1 border border-gray-300 rounded-lg shadow-sm focus:ring-[#2EAFB2] focus:border-[#2EAFB2] text-sm">
                            </label>
                        </div>
                    </div>
                    <div>
                        <label for="periodoIdeal" class="block text-sm font-medium text-gray-700 mb-1">Qual o período ideal para a realização deste treinamento/mentoria?</label>
                        <input type="text" id="periodoIdeal" name="entry.1044454988" class="mt-1 block w-full px-4 py-2 border border-gray-300 rounded-lg shadow-sm focus:ring-[#2EAFB2] focus:border-[#2EAFB2] sm:text-sm" placeholder="Ex: Próximo trimestre, em 6 meses, etc.">
                    </div>
                    <div>
                        <label for="orcamentoEstimado" class="block text-sm font-medium text-gray-700 mb-1">Qual o orçamento estimado que sua empresa possui para investir neste desenvolvimento? (Essa informação nos ajuda a direcionar a melhor proposta de valor)</label>
                        <input type="text" id="orcamentoEstimado" name="entry.2104907954" class="mt-1 block w-full px-4 py-2 border border-gray-300 rounded-lg shadow-sm focus:ring-[#2EAFB2] focus:border-[#2EAFB2] sm:text-sm" placeholder="Ex: R$ 10.000 - R$ 20.000">
                    </div>
                </div>
            </section>

            <section>
                <h2 class="text-xl sm:text-2xl font-semibold text-[#3C366B] mb-4 section-title">V. Perguntas Adicionais e Observações</h2>
                <div>
                    <label for="observacoesAdicionais" class="block text-sm font-medium text-gray-700 mb-1">Há algo mais que você gostaria de nos informar sobre as necessidades da sua organização ou sobre suas expectativas em relação a esta parceria com a Valente?</label>
                    <textarea id="observacoesAdicionais" name="entry.209865809" rows="4" class="mt-1 block w-full px-4 py-2 border border-gray-300 rounded-lg shadow-sm focus:ring-[#2EAFB2] focus:border-[#2EAFB2] sm:text-sm"></textarea>
                </div>
            </section>

            <!-- Botão de Envio -->
            <div class="mt-8 text-center">
                <button type="submit" class="inline-flex items-center px-6 py-3 border border-transparent text-base font-medium rounded-xl shadow-sm text-gray-900 bg-[#FFD500] hover:bg-[#E0C000] focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-[#FFD500] transition ease-in-out duration-200">
                    Enviar Diagnóstico
                </button>
            </div>
        </form>

        <script>
            // Função assíncrona para enviar os dados do formulário via Resend API
            async function sendFormData(event) {
                event.preventDefault(); // Impede o envio padrão do formulário (que recarregaria a página)

                const submitButton = document.querySelector('button[type="submit"]');
                submitButton.disabled = true; // Desabilita o botão para evitar múltiplos cliques
                submitButton.textContent = 'Enviando...'; // Altera o texto do botão para indicar processamento

                const formData = new FormData(event.target);
                const formObject = {};
                let emailBodyText = 'Novo diagnóstico recebido:\n\n';
                let emailBodyHtml = '<p><strong>Novo diagnóstico recebido:</strong></p>';

                // Mapeamento de IDs dos campos para rótulos legíveis no e-mail
                const fieldLabels = {
                    '68067341': 'Nome da Empresa',
                    '1691243760': 'Setor de Atuação',
                    '1226065487': 'Porte da Empresa',
                    '101783060': 'Pessoa de Contato',
                    '69974868': 'Cargo',
                    '880479708': 'E-mail de Contato',
                    '1165439402': 'Telefone de Contato',
                    '277874400': 'Principais Desafios',
                    '1219662369': 'Impacto dos Desafios',
                    '2120014022': 'Objetivo Estratégico',
                    '1205318538': 'Urgência (Escala 1-10)',
                    '1505315809': 'Público-Alvo',
                    '2123512217': 'Público-Alvo (Outros)',
                    '848037466': 'Competências/Habilidades',
                    '1519782250': 'Comportamentos Esperados',
                    '1235221379': 'Como Medir o Sucesso (ROI)',
                    '1740924976': 'Formato de Treinamento Preferencial',
                    '1764669818': 'Formato de Treinamento (Outros)',
                    '1044454988': 'Período Ideal',
                    '2104907954': 'Orçamento Estimado',
                    '209865809': 'Observações Adicionais',
                };

                // Coleta os dados do formulário, tratando múltiplos valores (como checkboxes)
                for (const [key, value] of formData.entries()) {
                    const cleanKey = key.startsWith('entry.') ? key.substring(6) : key;

                    if (formObject[cleanKey]) {
                        if (Array.isArray(formObject[cleanKey])) {
                            formObject[cleanKey].push(value);
                        } else {
                            formObject[cleanKey] = [formObject[cleanKey], value];
                        }
                    } else {
                        formObject[cleanKey] = value;
                    }
                }

                // Constrói o corpo do e-mail em formato texto e HTML
                for (const entryId in formObject) {
                    if (formObject.hasOwnProperty(entryId)) {
                        const label = fieldLabels[entryId] || `ID ${entryId}`;
                        let value = formObject[entryId];

                        if (Array.isArray(value)) {
                            value = value.join(', '); // Junta múltiplos valores de checkboxes com vírgula
                        }

                        emailBodyText += `${label}: ${value}\n`;
                        emailBodyHtml += `<p><strong>${label}:</strong> ${value}</p>`;
                    }
                }

                // ATENÇÃO: Chave de API Resend.
                // Por segurança, esta chave NÃO DEVE ser exposta diretamente no código-fonte do lado do cliente
                // em um ambiente de produção. Para produção, considere usar um proxy no servidor
                // ou uma função serverless para chamar a API do Resend.
                const API_KEY = 're_3woQY4Um_CUdJd9WreJ8J468SSK7QmPRT'; 

                try {
                    const response = await fetch('https://api.resend.com/emails', {
                        method: 'POST',
                        headers: {
                            'Content-Type': 'application/json',
                            'Authorization': `Bearer ${API_KEY}`
                        },
                        body: JSON.stringify({
                            from: 'Valente Diagnóstico <onboarding@resend.dev>', // Substitua por seu e-mail/domínio verificado no Resend
                            to: ['oi@institutovalente.com.br'],
                            subject: `Novo Diagnóstico Valente - ${formObject['68067341'] || 'Empresa Sem Nome'}`, // Assunto do e-mail com o nome da empresa
                            text: emailBodyText, // Versão em texto puro do e-mail
                            html: emailBodyHtml // Versão em HTML do e-mail
                        })
                    });

                    const data = await response.json();

                    if (response.ok) {
                        console.log('Email sent successfully:', data);
                        // Redireciona para a página de agradecimento após 500ms
                        setTimeout(() => {
                            window.location.href = 'agradecimento.html';
                        }, 500); 
                    } else {
                        console.error('Failed to send email:', data);
                        // Em um ambiente de produção, use um modal personalizado para alertar o usuário
                        alert('Ocorreu um erro ao enviar o formulário. Por favor, tente novamente mais tarde.'); 
                    }
                } catch (error) {
                    console.error('Error during fetch:', error);
                    // Em um ambiente de produção, use um modal personalizado para alertar o usuário
                    alert('Ocorreu um erro de conexão. Por favor, verifique sua internet e tente novamente.'); 
                } finally {
                    submitButton.disabled = false; // Reabilita o botão
                    submitButton.textContent = 'Enviar Diagnóstico'; // Restaura o texto original do botão
                }
            }
        </script>
    </div>
</body>
</html>
